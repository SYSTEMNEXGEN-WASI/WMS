@{ ViewBag.Title = "Alert";
 Layout = "~/Views/Shared/_LayoutV2.cshtml";
 }

<h2>Alert</h2>
<section class="wrapper main-wrapper row">


    <form method="post">
        <section>
            <header class="panel-header">
                <h2 class="title pull-left">Alert Details</h2>
                @*<div class="actions panel_actions pull-right">
                        <a class="box_toggle fa fa-chevron-down"></a>
                    </div>*@
            </header>
            <div class="row">               


                <div class="col-xs-12">

                    <ul class="nav nav-tabs nav-justified primary">
                        <li class="active">
                            <a href="#home-7" data-toggle="tab">
                                <i></i> Enquiry Details
                            </a>
                        </li>
                        <li>
                            <a href="#profile-7" data-toggle="tab">
                                <i></i> FeedBack Details
                            </a>
                        </li>
                    </ul>

                    <div class="tab-content primary">
                        <div class="tab-pane fade in active" id="home-7">
                            @* WORK TODO:  *@
                            @*<div class="col-xs-12">*@
                                <section class="box ">
                                    <header class="panel_header">
                                        <h2 class="title pull-left">Enquiry Details</h2>
                                        <div class="actions panel_actions pull-right">
                                            <a class="box_toggle fa fa-chevron-down"></a>
                                            @*<a class="box_setting fa fa-cog" data-toggle="modal" href="#section-settings"></a>*@
                                        </div>
                                    </header>
                                    <div class="content-body">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="table-responsive">
                                                    <table class="table table-bordered table-striped" id="EnquiryDetail">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Enquiry Id</th>
                                                                <th>Enquiry Date</th>
                                                                <th>Customer</th>
                                                                <th>Cell No</th>
                                                                <th>Address</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </section>
                            </div>
                        @*</div>*@
                        <div class="tab-pane fade" id="profile-7">
                            @*<div class="col-xs-12">*@
                                <section class="box ">
                                    <header class="panel_header">
                                        <h2 class="title pull-left">FollowUp Details</h2>
                                        <div class="actions panel_actions pull-right">
                                            <a class="box_toggle fa fa-chevron-down"></a>
                                            @*<a class="box_setting fa fa-cog" data-toggle="modal" href="#section-settings"></a>*@
                                        </div>
                                    </header>
                                    <div class="content-body">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="table-responsive">
                                                    <table class="table table-bordered table-striped" id="FollowUpDetail">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Enquiry Id</th>
                                                                <th>Enquiry Date</th>
                                                                <th>Customer</th>
                                                                <th>FollowUp Date</th>
                                                                <th>FollowUp Time</th>
                                                                <th>Next Action Plan</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </section>
                            @*</div>*@        <!-- PRODUCT INFORMATION ENDS -->
                        </div>
                    </div>

                </div>
            </div>
        </section>
        @*<div class="col-xs-12">
                <section class="box ">
                    <div class="content-body">
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="pull-left">
                                    <button type="reset" class="btn btn-default" id="btnCancel" style="margin-top:25px;">Cancel</button>
                                </div>
                                <div class="pull-right">
                                    <button type="button" class="btn btn-primary" id="btnSave" style="margin-top:25px;" onclick='$("#section-confirm").modal("show")'>Save</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>*@
    </form>
    <!-- Popup box modal start -->
    <div class="modal" id="section-confirm" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Confirm</h4>
                </div>
                <div class="modal-body">

                    <h5>Are you sure want to save ?</h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                    <button class="btn btn-success" type="button" onclick="SaveForm()">Save</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
    <!-- Popup box modal start -->
    <div class="modal" id="section-message" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header" id="modalMessage">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="lblTitle"></h4>
                </div>
                <div class="modal-body">

                    <h5 id="lblMessage"></h5>

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button" onclick="location.reload();">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal end -->
    <!-- MAIN CONTENT AREA ENDS -->
</section>
}

<link href='@Url.Content("~/assets/plugins/select2/select2.css")' rel="stylesheet" type="text/css" media="screen" />
<link href='@Url.Content("~/assets/plugins/icheck/skins/minimal/blue.css")' rel="stylesheet" type="text/css" media="screen" />
<script src='@Url.Content("~/assets/js/jquery-1.11.2.min.js")' type="text/javascript"></script>
<script src='@Url.Content("~/assets/plugins/select2/select2.min.js")' type="text/javascript"></script>
<script src="../assets/plugins/icheck/icheck.min.js" type="text/javascript"></script>



<script>

    $(document).ready(function () {
        Get_AlertEnquiryDetailsData();
        Get_FollowUpDetailsData();
    })

    function Get_AlertEnquiryDetailsData() {
        var rowCount = 1;
        var dataCount = 1;
        var SNo = 1;
        $.ajax({
            dataType: "json",
            async: true,
            type: 'GET',
            url: '@Url.Content("~/Enquiry/Select_AlertEnquiryData")',
            success: function (data) {
                if (data.Success == true) {
                    var item = JSON.parse(data.Response)
                    $("#EnquiryDetail tbody tr").remove()
                    //ProductDetail
                    if (item.length > 0) {
                        $.each(item, function (value, item) {
                            debugger;
                            $("#EnquiryDetail tbody").append('<tr id="fixedRow' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '">' +
                                                    '<td>' + SNo++ + '</td>' +
                                                    '<td> <label id="lblEnquiryId">' + item.Enquiry_ID + ' </label></td>' +
                                                    '<td> <label id="lblEnqDate">' + item.EnqDate + ' </label></td>' +
                                                    '<td> <label id="lblName">' + item.Name + ' </label></td>' +
                                                    '<td> <label id="lblMobile">' + item.Mobile + ' </label></td>' +
                                                    '<td> <label id="lblResAddress">' + item.ResAddress + ' </label></td>' +
                                                    '</tr>');

                        });

                    }
                }
            },
            complete: function () {

            },
        });

        //}

    }


        function Get_FollowUpDetailsData() {
            var rowCount = 1;
            var dataCount = 1;
            var SNo = 1;

            $.ajax({
                dataType: "json",
                async: true,
                type: 'GET',
                url: '@Url.Content("~/Enquiry/Select_AlertFollowUpData")',
                success: function (data) {

                    if (data.Success == true) {
                        var item = JSON.parse(data.Response)
                        $("#FollowUpDetail tbody tr").remove()
                        //ProductDetail
                        if (item.length > 0) {

                            $.each(item, function (value, item) {
                                debugger;
                                $("#FollowUpDetail tbody").append('<tr  id="fixedRow' + (rowCount++) + '" data-tr-count="' + (dataCount++) + '">' +
                                                                    '<td>' + SNo++ + '</td>' +
                                                                    '<td> <label id="lblEnquiryId">' + item.Enquiry_ID + ' </label></td>' +
                                                                    '<td> <label id="lblEnqDate">' + item.EnqDate + ' </label></td>' +
                                                                    '<td> <label id="lblName">' + item.Name + ' </label></td>' +
                                                                    '<td> <label id="lblFollowUpDate">' + item.NextFollowUpDate + ' </label></td>' +
                                                                    '<td> <label id="lblFollowUpTime">' + item.NextFollowUpTime + ' </label></td>' +
                                                                    '<td> <label id="lblFollowUpTime">' + item.NextFollowupActionPlan + ' </label></td>' +

                                                                                '</tr>');

                            });

                        }
                    }
                },
                complete: function () {

                },
            });
        }


    
</script>


